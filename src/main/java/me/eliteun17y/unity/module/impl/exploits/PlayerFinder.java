package me.eliteun17y.unity.module.impl.exploits;

import me.eliteun17y.unity.event.Subscribe;
import me.eliteun17y.unity.event.impl.EventUpdate;
import me.eliteun17y.unity.module.Category;
import me.eliteun17y.unity.module.Module;
import me.eliteun17y.unity.util.chat.ChatUtil;
import me.eliteun17y.unity.util.world.PacketUtil;
import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityBoat;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketSteerBoat;
import org.lwjgl.input.Keyboard;

public class PlayerFinder extends Module {
    public PlayerFinder() {
        super("Player Finder", "Finds players.", Category.EXPLOITS, Keyboard.KEY_NONE);
    }

    @Subscribe
    public void onUpdate(EventUpdate event) {
        if(mc.player.getRidingEntity() instanceof EntityBoat) {
            for(int i = 0; i < 2; i++) {
                PacketUtil.sendSilentPacket(new CPacketPlayer.Position(mc.player.posX, -1337.7D, mc.player.posZ, false));
                PacketUtil.sendSilentPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY, mc.player.posZ, false));
                PacketUtil.sendSilentPacket(new CPacketSteerBoat(false, true));
            }
        }

        for(Entity entity : mc.world.playerEntities) {
            if(entity != mc.player) {
                ChatUtil.sendClientMessage("Player located. X: " + entity.getPosition().getX() + ", Y: " + entity.getPosition().getY() + ", Z: " + entity.getPosition().getZ());
            }
        }
    }
}
