package me.eliteun17y.unity.module.impl.exploits;

import me.eliteun17y.unity.event.Direction;
import me.eliteun17y.unity.event.Subscribe;
import me.eliteun17y.unity.event.impl.EventPacket;
import me.eliteun17y.unity.event.impl.EventUpdate;
import me.eliteun17y.unity.module.Category;
import me.eliteun17y.unity.module.Module;
import me.eliteun17y.unity.util.world.PacketUtil;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import org.lwjgl.input.Keyboard;

public class QuickBreak extends Module {
    public CPacketPlayerDigging packet;

    public QuickBreak() {
        super("Quick Break", "Uses an exploit to repeatedly break a block after you have broken it.", Category.EXPLOITS, Keyboard.KEY_NONE);
    }

    @Subscribe
    public void onUpdate(EventUpdate event) {
        if(packet != null)
            PacketUtil.sendSilentPacket(packet);
    }

    @Subscribe
    public void onPacket(EventPacket event) {
        if(event.getDirection() == Direction.OUTGOING) {
            if(event.getPacket() instanceof CPacketPlayerDigging) {
                if(((CPacketPlayerDigging) event.getPacket()).getAction() == CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK) {
                    packet = (CPacketPlayerDigging) event.getPacket();
                }
            }
        }
    }
}
