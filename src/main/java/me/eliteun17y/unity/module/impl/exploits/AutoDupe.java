package me.eliteun17y.unity.module.impl.exploits;

import me.eliteun17y.unity.event.Subscribe;
import me.eliteun17y.unity.event.impl.EventUpdate;
import me.eliteun17y.unity.module.Category;
import me.eliteun17y.unity.module.Module;
import me.eliteun17y.unity.util.chat.ChatUtil;
import me.eliteun17y.unity.util.setting.impl.ModeValue;
import me.eliteun17y.unity.util.time.Timer;
import net.minecraft.client.settings.KeyBinding;
import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityItemFrame;
import net.minecraft.init.Items;
import org.lwjgl.input.Keyboard;

public class AutoDupe extends Module {
    public ModeValue server = new ModeValue(this, "Server", "Sweet Anarchy", "Sweet Anarchy");

    public Timer timer = new Timer();

    public AutoDupe() {
        super("Auto Dupe", "Automatically performs duplication glitches.", Category.EXPLOITS, Keyboard.KEY_NONE);
    }

    @Subscribe
    public void onUpdate(EventUpdate event) {
        switch(server.getMode()) {
            case "Sweet Anarchy":
                KeyBinding.setKeyBindState(mc.gameSettings.keyBindUseItem.getKeyCode(), true);
                EntityItemFrame iFrame = null;
                for(Entity e : mc.world.loadedEntityList)
                    if(e instanceof EntityItemFrame)
                        if(iFrame == null) iFrame=(EntityItemFrame) e;
                ChatUtil.sendClientMessage("Rotation: " + iFrame.getRotation());
                if(iFrame != null && iFrame.getDisplayedItem().getItem() != Items.AIR && !(iFrame.getRotation() % 2 == 0) && timer.hasTimePassed(75)) {
                    mc.playerController.attackEntity(mc.player, iFrame);
                    timer.reset();
                }
                /*KeyBinding.setKeyBindState(mc.gameSettings.keyBindUseItem.getKeyCode(), false);
                EntityItemFrame iFrame = null;
                for(Entity e : mc.world.loadedEntityList)
                    if(e instanceof EntityItemFrame)
                        if(iFrame == null) iFrame=(EntityItemFrame) e;
                if(iFrame != null && iFrame.getDisplayedItem().getItem() != Items.AIR) mc.playerController.attackEntity(mc.player, iFrame);
                if(timer.hasTimePassed(50)) {
                    timer.reset();
                }
                break;*/
        }
    }
}
